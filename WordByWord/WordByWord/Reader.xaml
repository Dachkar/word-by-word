<mah:MetroWindow
        xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
        x:Class="WordByWord.Reader"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WordByWord"
        xmlns:converters="clr-namespace:WordByWord.Converters"
        xmlns:dialog="clr-namespace:MahApps.Metro.Controls.Dialogs;assembly=MahApps.Metro"
        dialog:DialogParticipation.Register="{Binding}"
        mc:Ignorable="d"
        Title="Reader" Height="450" Width="800">

    <Window.Resources>
        <Storyboard x:Key="SbShowBottomMenu" >
            <ThicknessAnimation Storyboard.TargetProperty="Margin" From="0,0,0,-100" To="0,0,0,0" DecelerationRatio=".9" Duration="0:0:1" />
        </Storyboard>
        <Storyboard x:Key="SbHideBottomMenu">
            <ThicknessAnimation Storyboard.TargetProperty="Margin" From="0,0,0,0" To="0,0,0,-100" AccelerationRatio=".9" Duration="0:0:1" />
        </Storyboard>
        <converters:InverseBoolConverter x:Key="InverseBool"/>
    </Window.Resources>
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="9*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="2*"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <Button Style="{DynamicResource MetroCircleButtonStyle}" 
                Grid.Column="0" 
                Width="50" 
                Height="50"
                Margin="10 5 0 0"
                HorizontalAlignment="Left" 
                VerticalAlignment="Top"
                BorderThickness="0">
            <Rectangle Width="30"
                       Height="30"
                       Fill="{Binding Path=Foreground, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Button}}}">
                <Rectangle.OpacityMask>
                    <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_arrow_left}" />
                </Rectangle.OpacityMask>
            </Rectangle>
        </Button>

        <StackPanel Grid.Column="1"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center">
            
            <Label x:Name="WordDisplay"
                   FontSize="{Binding ReaderFontSize}"
                   Content="{Binding CurrentWord}" 
                   Margin="0 50 0 0"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"/>
            <StackPanel Orientation="Horizontal" 
                        HorizontalAlignment="Center"
                        Margin="0 10 0 0">
                <Button Style="{DynamicResource MetroCircleButtonStyle}" Width="50" Height="50" BorderBrush="Black">
                    <Rectangle Width="20"
                               Height="20"
                               Fill="{Binding Path=Foreground, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Button}}}">
                        <Rectangle.OpacityMask>
                            <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_navigate_previous}" />
                        </Rectangle.OpacityMask>
                    </Rectangle>
                </Button>
                <Button x:Name="PlayButton" Command="{Binding ReadSelectedDocumentCommand}" Style="{DynamicResource MetroCircleButtonStyle}" Width="50" Height="50" BorderBrush="Black">
                    <Rectangle Width="20"
                               Height="20"
                               Fill="{Binding Path=Foreground, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Button}}}">
                        <Rectangle.OpacityMask>
                            <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_control_play}" />
                        </Rectangle.OpacityMask>
                    </Rectangle>
                </Button>
                <Button Style="{DynamicResource MetroCircleButtonStyle}" Width="50" Height="50" BorderBrush="Black">
                    <Rectangle Width="20"
                               Height="20"
                               Fill="{Binding Path=Foreground, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Button}}}">
                        <Rectangle.OpacityMask>
                            <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_navigate_next}" />
                        </Rectangle.OpacityMask>
                    </Rectangle>
                </Button>
            </StackPanel>
        </StackPanel>

        <StackPanel Grid.Column="2">
            <Button Style="{DynamicResource MetroCircleButtonStyle}" 
                Grid.Column="2" 
                Width="50" 
                Height="50" 
                Margin="0 5 10 0"
                HorizontalAlignment="Right" 
                VerticalAlignment="Top"
                BorderThickness="0"
                    Command="{Binding OpenEditorCommand}">
                <Rectangle Width="30"
                           Height="30"
                           Margin="0 0 5 0"
                           Fill="{Binding Path=Foreground, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Button}}}">
                    <Rectangle.OpacityMask>
                        <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_clipboard_edit}" />
                    </Rectangle.OpacityMask>
                </Rectangle>
            </Button>
            <Button Style="{DynamicResource MetroCircleButtonStyle}" 
                Grid.Column="2" 
                Width="50" 
                Height="50" 
                Margin="0 0 10 0"
                HorizontalAlignment="Right" 
                VerticalAlignment="Top"
                BorderThickness="0">
                <Rectangle Width="30"
                           Height="30"
                           Fill="{Binding Path=Foreground, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Button}}}">
                    <Rectangle.OpacityMask>
                        <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_settings}" />
                    </Rectangle.OpacityMask>
                </Rectangle>
            </Button>
            <Button Style="{DynamicResource MetroCircleButtonStyle}" 
                Grid.Column="2" 
                Margin="0 0 10 0"
                Width="50" 
                Height="50" 
                HorizontalAlignment="Right" 
                VerticalAlignment="Top"
                BorderThickness="0">
                <Rectangle Width="25"
                           Height="30"
                           Fill="{Binding Path=Foreground, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Button}}}">
                    <Rectangle.OpacityMask>
                        <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_refresh}" />
                    </Rectangle.OpacityMask>
                </Rectangle>
            </Button>
        </StackPanel>

        <StackPanel Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="2" Panel.ZIndex="2" Name="BottomMenu" Orientation="Vertical" Width="400" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,0,0,-100">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="10"/>
                </Grid.RowDefinitions>
                <Button Name="BtnBottomMenuHide" Panel.ZIndex="2" Width="130" Height="10" Click="BtnBottomMenuHide_Click"/>
                <Button Name="BtnBottomMenuShow" Panel.ZIndex="2" Width="130" Height="10" Click="BtnBottomMenuShow_Click"/>
            </Grid>
            <Border BorderBrush="#4C808080" BorderThickness="1" Height="100" Background="#4C808080" >
                <mah:MetroTabControl x:Name="TabControl"
                                     Background="Transparent"
                                     Grid.Row="1" 
                                     Grid.ColumnSpan="3">
                    <mah:MetroTabItem Header="Item 1"/>
                    <mah:MetroTabItem Header="Word Grouping">
                        <StackPanel>
                            <Label HorizontalAlignment="Center" 
                                   Content="Slide to adjust the number of words that are shown at once" 
                                   FontSize="13"/>
                            <Slider Width="250"
                                    Value="{Binding NumberOfGroups}"
                                    IsEnabled="{Binding IsBusy, Converter={StaticResource InverseBool}}"
                                    AutoToolTipPlacement="TopLeft"
                                    TickPlacement="BottomRight"
                                    mah:SliderHelper.EnableMouseWheel="MouseHover"
                                    mah:SliderHelper.ChangeValueBy="LargeChange"
                                    Maximum="5"
                                    Minimum="1"
                                    IsSnapToTickEnabled="True"/>
                        </StackPanel>
                    </mah:MetroTabItem>
                    <mah:MetroTabItem Header="Item 3"/>
                </mah:MetroTabControl>
            </Border>
        </StackPanel>
    </Grid>
</mah:MetroWindow>
